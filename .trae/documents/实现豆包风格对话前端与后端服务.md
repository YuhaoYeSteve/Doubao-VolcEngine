## 目标
- 提供一个简洁的豆包风格前端页面：左侧会话管理侧栏 + 右侧聊天区
- 使用 Ark 模型完成纯文本对话（首版不做流式/SSE），后端基于 ark_demo.py 改造成正式 API 服务

## 前端页面
- 新增页面：chat.html（Tailwind CDN + 原生 JS）
- 布局：
  - 侧栏（约 280px）：会话列表，支持新建/重命名/删除/切换
  - 主区：消息气泡（user/assistant），顶部显示当前会话标题与模型名，底部输入框 + 发送按钮
- 状态管理：
  - 使用 localStorage 持久化会话，结构：{ id, title, messages: [{role, content, created}] }
  - 操作：新建会话时自动创建空 messages；删除/重命名立即写入 localStorage；切换刷新消息窗
- 交互与体验：
  - Enter 发送，Shift+Enter 换行
  - 发送中禁用输入并显示 loading；失败时 toast 展示错误
  - 消息区自动滚动到底；首版不做 Markdown 渲染（纯文本）

## 后端服务（基于 ark_demo.py）
- 重命名：ark_demo.py → ark_server.py（更正式）
- 改造成 FastAPI 应用：
  - GET / 返回健康状态
  - POST /api/chat：请求体 { messages: [{ role: "user"|"assistant"|"system", content: string }] }
  - 响应：{ content, model, response_id, created, usage }
- Ark 客户端：
  - from volcenginesdkarkruntime import Ark
  - API Key 优先取环境变量 ARK_API_KEY；无则读取 config.ini 的 [ARK].api_key
  - base_url 固定为 https://ark.cn-beijing.volces.com/api/v3
- CORS：开发期允许 *
- 存储：首版不做服务端会话存储（由前端携带完整 messages 调用后端）

## API 契约
- 请求示例：
  - body: { messages: [{ role: "system", content: "你是有帮助的助手" }, { role: "user", content: "你好" }] }
- 响应示例：
  - { content: "你好！", model, response_id, created, usage: { prompt_tokens, completion_tokens, total_tokens } }

## 文件与改动
- 新增：chat.html（前端页面与脚本）
- 重命名 + 新增：ark_server.py（从 ark_demo.py 改造而来）
- 不改动现有 backend.py（保留图片识别示例），前端 chat.html 默认调用 ark_server.py（端口 8000 或 8001）

## 运行方式
- 安装依赖：pip install "volcengine-python-sdk[ark]" fastapi uvicorn pydantic
- 环境变量：export ARK_API_KEY=你的ArkKey（或在 config.ini 的 [ARK] 中配置 api_key）
- 启动后端：uvicorn ark_server:app --host 0.0.0.0 --port 8000（如 8000 已占用，可用 8001）
- 打开前端：用浏览器直接打开 chat.html

## 后续迭代（非首版）
- 支持流式响应（SSE/WebSocket）与消息逐字显示
- 服务端持久化会话（数据库/文件）与共享链接
- 富文本渲染（Markdown/代码高亮）与文件/图片多模态输入

请确认以上方案。确认后我将：
1) 重命名并实现 ark_server.py 的 API；2) 新增 chat.html 前端页面；3) 连接并验证端到端对话流程。